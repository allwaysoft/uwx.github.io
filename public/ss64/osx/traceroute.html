<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <meta name="description" content="A place for random garbage." />
  

  
  
  
  
  
  
  <title>
    
      Chris Hansen&#39;s Nut Shack
    </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="traceroute 
Print the route packets take to network host.
Syntax
      traceroute [options] host [packetsize]
Options
     host    Host name or IP number
 -m&amp;lt;/b&amp;gt; &amp;lt;i&amp;gt;max&amp;lt;/i&amp;gt;&amp;lt;b&amp;gt;_">
<meta property="og:type" content="website">
<meta property="og:title" content="Chris Hansen's Nut Shack">
<meta property="og:url" content="http://rafa1231518.github.io/osx/traceroute.html">
<meta property="og:site_name" content="Chris Hansen's Nut Shack">
<meta property="og:description" content="traceroute 
Print the route packets take to network host.
Syntax
      traceroute [options] host [packetsize]
Options
     host    Host name or IP number
 -m&amp;lt;/b&amp;gt; &amp;lt;i&amp;gt;max&amp;lt;/i&amp;gt;&amp;lt;b&amp;gt;_">
<meta property="og:image" content="http://rafa1231518.github.io/../images/top.png">
<meta property="og:updated_time" content="2016-11-02T00:01:03.323Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chris Hansen's Nut Shack">
<meta name="twitter:description" content="traceroute 
Print the route packets take to network host.
Syntax
      traceroute [options] host [packetsize]
Options
     host    Host name or IP number
 -m&amp;lt;/b&amp;gt; &amp;lt;i&amp;gt;max&amp;lt;/i&amp;gt;&amp;lt;b&amp;gt;_">
<meta name="twitter:image" content="http://rafa1231518.github.io/../images/top.png">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link href="https://fonts.googleapis.com/css?family=Roboto|Source+Code+Pro" rel="stylesheet">
  
    <link rel="stylesheet" href="/css/style.css">
    <style type="text/css">
.header-anchor {
  display: none;
}
    </style>
  
  

  
  <!-- baidu webmaster push -->
  <!-- tracking
  <script src='//push.zhanzhang.baidu.com/push.js'></script>
  -->

</head>
<body class="home blog custom-background custom-font-enabled single-author">
  
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Chris Hansen&#39;s Nut Shack" rel="home">Chris Hansen&#39;s Nut Shack</a>
      </h1>
      
        <h2 class="site-description">
          <a href="/" id="subtitle">Have a seat, right over there.</a>
        </h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/pagelist">Tools &amp; Stuff</a></li>
                
                </ul>
            </div>
    </nav>
</header>
      <div id="main" class="wrapper">
        
          <div id="primary" class="site-content"><div id="content" role="main"><article id="page-undefined" class="page-undefined post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <!-- #BeginLibraryItem "/Library/head_osx.lbi" --><!-- #EndLibraryItem --><h1>traceroute</h1> 
<p>Print the route packets take to network host.</p>
<pre>Syntax
      traceroute [<i>options</i>] host [<i>packetsize</i>]
<p>Options<i></i></p>
<p>     <b>host    </b>Host name or IP number<b></b></p>
<pre><code> -m&lt;/b&gt; &lt;i&gt;max&lt;/i&gt;&lt;b&gt;_&lt;/b&gt;&lt;i&gt;ttl&lt;/i&gt;
  Set the max time-to-live (max number of hops) used in outgoing
  probe packets.  The default is 30 hops (the same default used for
  TCP connections).

 &lt;b&gt;-n&lt;/b&gt;
  Print hop addresses numerically rather than symbolically and
  numerically (saves a nameserver address-to-name lookup for each
  gateway found on the path).

 &lt;b&gt;-p&lt;/b&gt; &lt;i&gt;port&lt;/i&gt;
  Set the base UDP &lt;i&gt;port&lt;/i&gt; number used in probes (default is 33434).
  &lt;b&gt;Traceroute&lt;/b&gt; hopes that nothing is listening on UDP ports &lt;i&gt;base&lt;/i&gt; to
  &lt;i&gt;base+nhops-1&lt;/i&gt; at the destination host (so an ICMP PORT_UNREACHABLE
  message will be returned to terminate the route tracing). If
  something is listening on a port in the default range, this
  option can be used to pick an unused port range.
</code></pre>
<p><i>packetsize</i>  The default probe datagram length is 38 bytes, but this may be<br>
increased  by specifying a packet size (in bytes) after the<br>
destination host name.</p>
<pre><code> &lt;b&gt;-q&lt;/b&gt; &lt;i&gt;nqueries&lt;/i&gt;
  Set the number of probes per `ttl' to &lt;i&gt;nqueries&lt;/i&gt; (default is
  three probes).

 &lt;b&gt;-r
</code></pre>
<p>      Bypass the normal routing tables and send directly to a host on<br>
an attached network.  If the host is not on a directly-attached<br>
network, an error is returned.  This option can be used to ping a<br>
local host through an interface that has no route through it<br>
(e.g., after the interface was dropped by <b>routed(8)</b>).</p>
<pre><code> &lt;b&gt;-s&lt;/b&gt; &lt;i&gt;src&lt;/i&gt;&lt;b&gt;_&lt;/b&gt;&lt;i&gt;addr&lt;/i&gt;
  Use the following IP address (which must be given as an IP num-
  ber, not a hostname) as the source address in outgoing probe
  packets.  On hosts with more than one IP address, this option can
  be used to force the source address to be something other than
  the IP address of the interface the probe packet is sent on.  If
  the IP address is not one of this machine's interface addresses,
  an error is returned and nothing is sent.

 &lt;b&gt;-t&lt;/b&gt; &lt;i&gt;tos&lt;/i&gt;
  Set the &lt;i&gt;type-of-service&lt;/i&gt; in probe packets to the following value
  (default zero).  The value must be a decimal integer in the range
  0 to 255. This option can be used to see if different types-of-
  service result in different paths.  (If you are not running a
  4.3BSD-Tahoe or later system, this may be academic since the nor-
  mal network services like telnet and ftp don't let you control
  the TOS). Not all values of TOS are legal or meaningful - see
  the IP spec for definitions.  Useful values are probably `-t 16'
  (low delay) and `-t 8' (high throughput).

 &lt;b&gt;-v&lt;/b&gt;
  Verbose output.  Received ICMP packets other than TIME_EXCEEDED
  and UNREACHABLEs are listed.

 &lt;b&gt;-w
</code></pre>
<p>      Set the time (in seconds) to wait for a response to a probe<br>
(default 3 sec.).</p></pre><p></p>
<p><span class="body"> This program attempts to trace the route an IP packet would 
  follow to some internet host by launching UDP probe packets with a small ttl 
  (time to live) then listening for an ICMP "time exceeded" reply from a gateway.<br>
  We start our probes with a ttl of one and increase by one until we get an ICMP 
  "port unreachable" (which means we got to "host") or hit a max (which defaults 
  to 30 hops &amp; can be changed with the <b>-m</b> flag). Three probes (changed 
  with <b>-q</b> flag) are sent at each ttl setting and a line is printed showing 
  the ttl, address of the gateway and round trip time of each probe. If the probe 
  answers come from different gateways, the address of each responding system 
  will be printed. If there is no response within a 3 sec. timeout interval (changed 
  with the <b>-w</b> flag), a "*" is printed for that probe.<br>
  <br>
  We don't want the destination host to process the UDP probe packets so the destination 
  port is set to an unlikely value (if some clod on the destination is using that 
  value, it can be changed with the <b>-p</b> flag).</span> </p>
<pre>     A sample use and output might be:
<pre><code> [yak 71]% traceroute nis.nsf.net.
 traceroute to nis.nsf.net (35.1.1.48), 30 hops max, 56 byte packet
 1 helios.ee.lbl.gov (128.3.112.1)  19 ms 19 ms  0 ms
 2 lilac-dmc.Berkeley.EDU (128.32.216.1)  39 ms  39 ms  19 ms
 3 lilac-dmc.Berkeley.EDU (128.32.216.1)  39 ms  39 ms  19 ms
 4 ccngw-ner-cc.Berkeley.EDU (128.32.136.23)  39 ms  40 ms  39 ms
 5 ccn-nerif22.Berkeley.EDU (128.32.168.22)  39 ms  39 ms 39 ms
 6 128.32.197.4 (128.32.197.4)  40 ms  59 ms  59 ms
 7 131.119.2.5 (131.119.2.5)  59 ms  59 ms  59 ms
 8 129.140.70.13 (129.140.70.13)  99 ms  99 ms  80 ms
 9 129.140.71.6 (129.140.71.6)  139 ms  239 ms  319 ms
 10  129.140.81.7 (129.140.81.7)  220 ms  199 ms  199 ms
 11  nic.merit.edu (35.1.1.48)  239 ms  239 ms  239 ms
 Note that lines 2 &amp;amp; 3 are the same.  This is due to a buggy kernel on the
 2nd hop system - lbl-csam.arpa - that forwards packets with a zero ttl (a
 bug in the distributed version of 4.3 BSD).  Note that you have to guess
 what path the packets are taking cross-country since the NSFNet (129.140)
 doesn't supply address-to-name translations for its NSSes.

 A more interesting example is:

 [yak 72]% traceroute allspice.lcs.mit.edu.
 traceroute to allspice.lcs.mit.edu (18.26.0.115), 30 hops max
 1 helios.ee.lbl.gov (128.3.112.1)  0 ms  0 ms  0 ms
 2 lilac-dmc.Berkeley.EDU (128.32.216.1)  19 ms  19 ms  19 ms
 3 lilac-dmc.Berkeley.EDU (128.32.216.1)  39 ms  19 ms  19 ms
 4 ccngw-ner-cc.Berkeley.EDU (128.32.136.23)  19 ms  39 ms  39 ms
 5 ccn-nerif22.Berkeley.EDU (128.32.168.22)  20 ms  39 ms 39 ms
 6 128.32.197.4 (128.32.197.4)  59 ms  119 ms  39 ms
 7 131.119.2.5 (131.119.2.5)  59 ms  59 ms  39 ms
 8 129.140.70.13 (129.140.70.13)  80 ms  79 ms  99 ms
 9 129.140.71.6 (129.140.71.6)  139 ms  139 ms  159 ms
 10  129.140.81.7 (129.140.81.7)  199 ms  180 ms  300 ms
 11  129.140.72.17 (129.140.72.17) 300 ms 239 ms 239 ms
 12  * * *
 13  128.121.54.72 (128.121.54.72) 259 ms 499 ms 279 ms
 14  * * *
 15  * * *
 16  * * *
 17  * * *
 18  ALLSPICE.LCS.MIT.EDU (18.26.0.115)  339 ms  279 ms  279 ms
 Note that the gateways 12, 14, 15, 16 &amp;amp; 17 hops away either don't send
 ICMP &quot;time exceeded&quot; messages or send them with a ttl too small to reach
 us.  14 - 17 are running the MIT C Gateway code that doesn't send &quot;time
 exceeded&quot;s.  God only knows what's going on with 12.

 The silent gateway 12 in the above may be the result of a bug in the
 4.[23] BSD network code (and its derivatives):  4.x (x &amp;lt;= 3) sends an
 unreachable message using whatever ttl remains in the original datagram.
 Since, for gateways, the remaining ttl is zero, the ICMP &quot;time exceeded&quot;
 is guaranteed to not make it back to us.  The behavior of this bug is
 slightly more interesting when it appears on the destination system:

 1 helios.ee.lbl.gov (128.3.112.1)  0 ms  0 ms  0 ms
 2 lilac-dmc.Berkeley.EDU (128.32.216.1)  39 ms  19 ms  39 ms
 3 lilac-dmc.Berkeley.EDU (128.32.216.1)  19 ms  39 ms  19 ms
 4 ccngw-ner-cc.Berkeley.EDU (128.32.136.23)  39 ms  40 ms  19 ms
 5 ccn-nerif35.Berkeley.EDU (128.32.168.35)  39 ms  39 ms 39 ms
 6 csgw.Berkeley.EDU (128.32.133.254)  39 ms  59 ms  39 ms
 7 * * *
 8 * * *
 9 * * *
 10  * * *
 11  * * *
 12  * * *
 13  rip.Berkeley.EDU (128.32.131.22)  59 ms !  39 ms !  39 ms !
 Notice that there are 12 &quot;gateways&quot; (13 is the final destination) and
 exactly the last half of them are &quot;missing&quot;.  What's really happening is
 that rip (a Sun-3 running Sun OS3.5) is using the ttl from our arriving
 datagram as the ttl in its ICMP reply.  So, the reply will time out on
 the return path (with no notice sent to anyone since ICMP's aren't sent
 for ICMP's) until we probe with a ttl that's at least twice the path
 length.  I.e., rip is really only 7 hops away.  A reply that returns with
 a ttl of 1 is a clue this problem exists. &lt;b&gt;Traceroute&lt;/b&gt; prints a &quot;!&quot; after
 the time if the ttl is &amp;lt;= 1.  Since vendors ship a lot of obsolete (DEC's
 Ultrix, Sun 3.x) or non-standard (HPUX) software, expect to see this
 problem frequently and/or take care picking the target host of your
 probes.  Other possible annotations after the time are &lt;b&gt;!H&lt;/b&gt;, &lt;b&gt;!N&lt;/b&gt;, &lt;b&gt;!P&lt;/b&gt; (got a
 host, network or protocol unreachable, respectively), &lt;b&gt;!S&lt;/b&gt; or &lt;b&gt;!F&lt;/b&gt; (source
 route failed or fragmentation needed - neither of these should ever occur
 and the associated gateway is busted if you see one).  If almost all the
 probes result in some kind of unreachable, &lt;b&gt;traceroute&lt;/b&gt; will give up and
 exit.

 This program is intended for use in network testing, measurement and man-
 agement.  It should be used primarily for manual fault isolation.
 Because of the load it could impose on the network, it is unwise to use
 &lt;b&gt;traceroute&lt;/b&gt; during normal operations or from automated scripts.&lt;/pre&gt;
</code></pre>
<p class="quote"><i>“The Net interprets censorship as damage and routes around it” ~ John Gilmore</i></p>
<p><b>Related:</b></p>
<p><a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man8/traceroute.8.html" target="_blank" rel="external">traceroute man page</a> - Apple.com<br>
netstat - Show network status<br>
<a href="ping.html">ping</a> - Test a network connection</p><!-- #BeginLibraryItem "/Library/foot_osx.lbi" --><p>
<!-- OSX300 -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-6140977852749469" data-ad-slot="1823340303"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
<hr>
<div id="bl" class="footer"><a href="traceroute.html#"><img src="../images/top.png" width="30" height="22" alt="Back to the Top"></a></div>
<div id="br" class="footer, tagline">© Copyright <a href="http://ss64.com/" target="_blank" rel="external">SS64.com</a> 1999-2016<br>
Some rights reserved</div><!-- #EndLibraryItem -->
</pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    Posted at <a href="/osx/traceroute.html">
    <time datetime="2016-09-04T22:26:55.000Z" class="entry-date">
        2016-09-04
    </time>
</a> (click date for permalink).
    
    
    </footer>
</article>


    






</div></div>
          <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="Search" />
    </div>
</form></aside>
  
    
  
    
  
    
  
    
  
    
  
</div>
        
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2016 chrishansen69 (rafa1231518).
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/wizardforcel/hexo-theme-cyanstyle">Wizard Zhang (wizardforcel)</a></p>
</footer>
    <!-- tracking
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
-->

<script src="/js/jquery-2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
  
</body>
</html>