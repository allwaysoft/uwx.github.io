(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var r=t(["and","or","not","is"]);var n=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"];var i=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];e.registerHelper("hintWords","python",n.concat(i));function a(e){return e.scopes[e.scopes.length-1]}e.defineMode("python",function(o,s){var l="error";var f=s.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/;var u=s.doubleOperators||/^([!<>]==|<>|<<|>>|\/\/|\*\*)/;var c=s.doubleDelimiters||/^(\+=|\-=|\*=|%=|\/=|&=|\|=|\^=)/;var p=s.tripleDelimiters||/^(\/\/=|>>=|<<=|\*\*=)/;var d=s.hangingIndent||o.indentUnit;var m=n,h=i;if(s.extra_keywords!=undefined)m=m.concat(s.extra_keywords);if(s.extra_builtins!=undefined)h=h.concat(s.extra_builtins);var b=!(s.version&&Number(s.version)<3);if(b){var y=s.singleOperators||/^[\+\-\*\/%&|\^~<>!@]/;var v=s.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;m=m.concat(["nonlocal","False","True","None","async","await"]);h=h.concat(["ascii","bytes","exec","print"]);var g=new RegExp("^(([rbuf]|(br))?('{3}|\"{3}|['\"]))","i")}else{var y=s.singleOperators||/^[\+\-\*\/%&|\^~<>!]/;var v=s.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;m=m.concat(["exec","print"]);h=h.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]);var g=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var x=t(m);var k=t(h);function w(e,t){if(e.sol())t.indent=e.indentation();if(e.sol()&&a(t).type=="py"){var r=a(t).offset;if(e.eatSpace()){var n=e.indentation();if(n>r)F(t);else if(n<r&&T(e,t))t.errorToken=true;return null}else{var i=_(e,t);if(r>0&&T(e,t))i+=" "+l;return i}}return _(e,t)}function _(e,t){if(e.eatSpace())return null;var n=e.peek();if(n=="#"){e.skipToEnd();return"comment"}if(e.match(/^[0-9\.]/,false)){var i=false;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)){i=true}if(e.match(/^\d+\.\d*/)){i=true}if(e.match(/^\.\d+/)){i=true}if(i){e.eat(/J/i);return"number"}var a=false;if(e.match(/^0x[0-9a-f]+/i))a=true;if(e.match(/^0b[01]+/i))a=true;if(e.match(/^0o[0-7]+/i))a=true;if(e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)){e.eat(/J/i);a=true}if(e.match(/^0(?![\dx])/i))a=true;if(a){e.eat(/L/i);return"number"}}if(e.match(g)){t.tokenize=z(e.current());return t.tokenize(e,t)}if(e.match(p)||e.match(c))return"punctuation";if(e.match(u)||e.match(y))return"operator";if(e.match(f))return"punctuation";if(t.lastToken=="."&&e.match(v))return"property";if(e.match(x)||e.match(r))return"keyword";if(e.match(k))return"builtin";if(e.match(/^(self|cls)\b/))return"variable-2";if(e.match(v)){if(t.lastToken=="def"||t.lastToken=="class")return"def";return"variable"}e.next();return l}function z(e){while("rubf".indexOf(e.charAt(0).toLowerCase())>=0)e=e.substr(1);var t=e.length==1;var r="string";function n(n,i){while(!n.eol()){n.eatWhile(/[^'"\\]/);if(n.eat("\\")){n.next();if(t&&n.eol())return r}else if(n.match(e)){i.tokenize=w;return r}else{n.eat(/['"]/)}}if(t){if(s.singleLineStringErrors)return l;else i.tokenize=w}return r}n.isString=true;return n}function F(e){while(a(e).type!="py")e.scopes.pop();e.scopes.push({offset:a(e).offset+o.indentUnit,type:"py",align:null})}function E(e,t,r){var n=e.match(/^([\s\[\{\(]|#.*)*$/,false)?null:e.column()+1;t.scopes.push({offset:t.indent+d,type:r,align:n})}function T(e,t){var r=e.indentation();while(t.scopes.length>1&&a(t).offset>r){if(a(t).type!="py")return true;t.scopes.pop()}return a(t).offset!=r}function O(e,t){if(e.sol())t.beginningOfLine=true;var r=t.tokenize(e,t);var n=e.current();if(t.beginningOfLine&&n=="@")return e.match(v,false)?"meta":b?"operator":l;if(/\S/.test(n))t.beginningOfLine=false;if((r=="variable"||r=="builtin")&&t.lastToken=="meta")r="meta";if(n=="pass"||n=="return")t.dedent+=1;if(n=="lambda")t.lambda=true;if(n==":"&&!t.lambda&&a(t).type=="py")F(t);var i=n.length==1?"[({".indexOf(n):-1;if(i!=-1)E(e,t,"])}".slice(i,i+1));i="])}".indexOf(n);if(i!=-1){if(a(t).type==n)t.indent=t.scopes.pop().offset-d;else return l}if(t.dedent>0&&e.eol()&&a(t).type=="py"){if(t.scopes.length>1)t.scopes.pop();t.dedent-=1}return r}var A={startState:function(e){return{tokenize:w,scopes:[{offset:e||0,type:"py",align:null}],indent:e||0,lastToken:null,lambda:false,dedent:0}},token:function(e,t){var r=t.errorToken;if(r)t.errorToken=false;var n=O(e,t);if(n&&n!="comment")t.lastToken=n=="keyword"||n=="punctuation"?e.current():n;if(n=="punctuation")n=null;if(e.eol()&&t.lambda)t.lambda=false;return r?n+" "+l:n},indent:function(t,r){if(t.tokenize!=w)return t.tokenize.isString?e.Pass:0;var n=a(t),i=n.type==r.charAt(0);if(n.align!=null)return n.align-(i?1:0);else return n.offset-(i?d:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"};return A});e.defineMIME("text/x-python","python");var o=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:o("by cdef cimport cpdef ctypedef enum except"+"extern gil include nogil property public"+"readonly struct union DEF IF ELIF ELSE")})});