<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <meta name="description" content="A place for random garbage." />
  

  
  
  
  
  
  
  <title>
    
      Chris Hansen&#39;s Nut Shack
    </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="CERTREQ 
Request certificate from a certification authority (CA), retrieve a  response to a previous request from a CA, create a new request from  an .inf file, accept and install a response to a requ">
<meta property="og:type" content="website">
<meta property="og:title" content="Chris Hansen's Nut Shack">
<meta property="og:url" content="http://rafa1231518.github.io/nt/certreq.html">
<meta property="og:site_name" content="Chris Hansen's Nut Shack">
<meta property="og:description" content="CERTREQ 
Request certificate from a certification authority (CA), retrieve a  response to a previous request from a CA, create a new request from  an .inf file, accept and install a response to a requ">
<meta property="og:image" content="http://rafa1231518.github.io/../images/top.png">
<meta property="og:updated_time" content="2016-11-02T00:02:48.930Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chris Hansen's Nut Shack">
<meta name="twitter:description" content="CERTREQ 
Request certificate from a certification authority (CA), retrieve a  response to a previous request from a CA, create a new request from  an .inf file, accept and install a response to a requ">
<meta name="twitter:image" content="http://rafa1231518.github.io/../images/top.png">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link href="https://fonts.googleapis.com/css?family=Roboto|Source+Code+Pro" rel="stylesheet">
  
    <link rel="stylesheet" href="/css/style.css">
    <style type="text/css">
.header-anchor {
  display: none;
}
    </style>
  
  

  
  <!-- baidu webmaster push -->
  <!-- tracking
  <script src='//push.zhanzhang.baidu.com/push.js'></script>
  -->

</head>
<body class="home blog custom-background custom-font-enabled single-author">
  
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Chris Hansen&#39;s Nut Shack" rel="home">Chris Hansen&#39;s Nut Shack</a>
      </h1>
      
        <h2 class="site-description">
          <a href="/" id="subtitle">Have a seat, right over there.</a>
        </h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/pagelist">Tools &amp; Stuff</a></li>
                
                </ul>
            </div>
    </nav>
</header>
      <div id="main" class="wrapper">
        
          <div id="primary" class="site-content"><div id="content" role="main"><article id="page-undefined" class="page-undefined post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <!-- #BeginLibraryItem "/Library/head_nt.lbi" --><!-- #EndLibraryItem --><h1>CERTREQ</h1> 
<p>Request certificate from a certification authority (CA), retrieve a  response to a previous request from a CA, create a new request from  an .inf file, accept and install a response to a request, construct a cross-certification or qualified subordination request from  an existing CA certificate or request, or to sign a cross-certification  or qualified subordination request. </p>
<pre>Syntax
      Certreq [-submit] [-retrieve <i>RequestID</i>] [-new] [-accept] [-policy] [-sign]
                 [-attrib AttributeString] [-binary] [-config <i>CAMachineName</i>\<i>CAName</i>]
                    [-crl] [-rpc] [-cert CertID]
                       [<i>RequestFileIn</i> | <i>CertChainFileIn</i> | <i>FullResponseFileIn</i> | <i>CertFileIn</i> | <i>PolicyFileIn</i>]
                          [<i>RequestFileOut</i> | <i>CertChainFileOut</i> | <i>FullResponseFileOut</i> | <i>CertFileOut</i> | <i>PKCS10FileOut</i>]
<p>Key<br>
-submit<br>
Submit a request to a CA.</p>
<p>-retrieve <i>RequestID</i><br>
Retrieve a response to a previous request from a CA.</p>
<p>-new<br>
Create a new request from an .inf file.</p>
<p>-accept<br>
Accept and install a response to a certificate request.</p>
<p>-policy<br>
Set the policy for a request.</p>
<p>-sign<br>
Sign a cross-certification or qualified subordination request.</p>
<p>-attrib <i>AttributeString<br>
</i>          The Name and Value string pairs, separated by a colon.<br>
Separate Name and Value string pairs with \n (for example, Name1:Value1\nName2:Value2).</p>
<p>-binary<br>
Format output files as binary instead of base64-encoded.</p>
<p>-config <i>CAMachineName</i>&lt;i&gt;CAName<br>
Process the operation using the CA specified in the configuration<br>
string, which is CAMachineName\CAName.</p>
<p>-crl<br>
Include certificate revocation lists (CRLs) in the output to the base64-encoded<br>
PKCS #7 file specified by CertChainFileOut or to the base64-encoded file<br>
specified by RequestFileOut.</p>
<p>-rpc<br>
Instructs Active Directory Certificate Services (AD CS) to use a<br>
remote procedure call (RPC) server connection instead of Distributed COM.</p>
<p>-cert CertID<br>
The signing certificate by common name, serial number, Secure Hash Algorithm<br>
(SHA-1) key, or certificate hash.</p>
<p>CertChainFileIn<br>
The base64-encoded or binary certificate chain input file to use.</p>
<p>FullResponseFileIn<br>
The base64-encoded or binary full response input file to use.</p>
<p>CertFileIn<br>
The base64-encoded or binary certificate input file to use.</p>
<p>RequestFileIn<br>
The base64-encoded or binary input file to use.<br>
The file can be a PKCS #10 certificate request, a PKCS #7 certificate renewal<br>
request, a KEYGEN tag format certificate request, a Certificate Management protocol<br>
using Cryptographic Message Syntax (CMS) request (this protocol is also known as CMC),<br>
or a certificate file of the CA that you want to cross-certify.</p>
<p>PolicyFileIn<br>
The .inf input file that contains the extension definitions to use to qualify a request.</p>
<p>RequestFileOut<br>
The base64-encoded file to which you want to send output.</p>
<p>PKCS10FileOut<br>
The base64-encoded PKCS #10 file to which you want to send output.</p>
<p>CertFileOut<br>
The binary or base64-encoded X.509 v3 file to which you want to send output.</p>
<p>CertChainFileOut<br>
The binary or base64-encoded PKCS #7 file to which you want to send output.</p>
<p>FullResponseFileOut<br>
The binary or base64-encoded full response file to which you want to send output.</p>
<p>-?     Display a list of certreq commands.</p></pre><p></p>
<p> You must specify the <i>CAComputerName</i> or <i>CAName</i> in -config <i>CAComputerName</i>\<i>CAName</i>. Otherwise, the Select Certificate Authority dialog box appears and displays a list of all CAs that are available.</p>
<p>To retrieve the certificate after the CA has actually issued it use certreq -retrieve <i>RequestID</i>, you can also use this command to retrieve any certificate that has ever been issued by the CA, including revoked or expired certificates, without regard to whether the certificate's request was ever in the pending state.</p>
<p> If you submit a request to the CA, the policy module of the CA might temporarily leave the request in a pending state and return the <i>RequestID</i> for display. Eventually, the CA’s administrator will issue the certificate or deny the request.</p>
<h2>Examples</h2>
<p>Sample request.inf</p>
<p class="code">;----------------- request.inf</p>
<p class="code">[Version] <br>
  Signature="$Windows NT$ </p>
<p class="code">[NewRequest]<br>
  Subject = "CN=dc01.ss64.com" ; must be the FQDN of domain controller<br>
  ;EncipherOnly = FALSE<br>
  Exportable = FALSE  ; TRUE = Private key is exportable<br>
  KeyLength = 1024    ; Common key sizes: 512, 1024, 2048, <br>
  ;    4096, 8192, 16384<br>
  KeySpec = 1             ; Key Exchange<br>
  KeyUsage = 0xA0     ; Digital Signature, Key Encipherment<br>
  MachineKeySet = True<br>
  ProviderName = "Microsoft RSA SChannel Cryptographic Provider"<br>
  ProviderType = 12<br>
  RequestType = CMC<br>
  <br>
  ; Omit entire section if CA is an enterprise CA<br>
  [EnhancedKeyUsageExtension]<br>
  OID=1.3.6.1.5.5.7.3.1 ; Server Authentication<br>
  <br>
  [RequestAttributes]<br>
  CertificateTemplate = WebServer ;Omit  line if CA is a stand-alone CA<br>
  ;SAN="dns=dc01.ss64.com&amp;dns=.ss64.com&amp;dns=ldap.ss64.com"<br>
  ;-----------------</p>
<p>Create a new request from an .inf file:
</p><p class="code">certreq -new request.inf result.txt</p>
<p>  Supply the text of result.txt to your CA to obtain a signed certificate (and an intermediate CA certificate, if applicable.)</p>
<p> Submit a request to a CA:</p>
<p class="code">certreq -submit result.txt certificate.cer</p>
<p> Retrieve a response to a previous request from a CA:</p>
<p class="code">certreq -retrieve [-binary] [-config CAMachineName\CAName] [-crl] [-rpc] RequestID [CertFileOut [CertChainFileOut [FullResponseFileOut]]] </p>
<p>Accept and install a response to a certificate request:</p>
<p class="code">certreq -accept c:\certificates\certificate.cer</p>
<p>Construct a cross-certification or qualified subordination request from an existing CA certificate or request:</p>
<p class="code">certreq -policy [-attrib AttributeString] [-binary] [-cert CertID] [RequestFileIn [PolicyFileIn [RequestFileOut [PKCS10FileOut]]]]  </p>
<p>Sign a cross-certification or qualified subordination request:</p>
<p><span class="code">certreq -sign [-binary] [-certCertID] [-crl] [RequestFileIn [RequestFileOut]]</span><br>
  <br>
  <i class="quote">“The certified  quality of person's actual education reflects in the degree of respect  he employs in his words while talking with others” ~Anuj Somany</i><br>
  <br>
  <b>Related:</b><br>
  <br>
  <a href="slmgr.html">SLMGR</a> - Software Licensing Management<br>
<a href="certutil.html">CERTUTIL</a> - Utility for certification authority (CA) files and services</p><!-- #BeginLibraryItem "/Library/foot_nt.lbi" --><p>
<!-- windows300 -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-6140977852749469" data-ad-slot="7649547908"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
<hr>
<div id="bl" class="footer"><a href="certreq.html#"><img src="../images/top.png" width="30" height="22" alt="Back to the Top"></a></div>
<div id="br" class="footer, tagline">© Copyright <a href="http://ss64.com/" target="_blank" rel="external">SS64.com</a> 1999-2016<br>
Some rights reserved</div><!-- #EndLibraryItem -->

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    Posted at <a href="/nt/certreq.html">
    <time datetime="2016-09-04T22:26:55.000Z" class="entry-date">
        2016-09-04
    </time>
</a> (click date for permalink).
    
    
    </footer>
</article>


    






</div></div>
          <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="Search" />
    </div>
</form></aside>
  
    
  
    
  
    
  
    
  
    
  
</div>
        
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2016 chrishansen69 (rafa1231518).
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/wizardforcel/hexo-theme-cyanstyle">Wizard Zhang (wizardforcel)</a></p>
</footer>
    <!-- tracking
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
-->

<script src="/js/jquery-2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
  
</body>
</html>