<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <meta name="description" content="A place for random garbage." />
  

  
  
  
  
  
  
  <title>
    
      Chris Hansen&#39;s Nut Shack
    </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="CALL  
 Call one batch program from another, or call a subroutine.
Syntax
      CALL [drive:][path]filename [parameters]
  CALL :&amp;lt;i&amp;gt;label&amp;lt;/i&amp;gt; [&amp;lt;i&amp;gt;&amp;lt;a href=&amp;quot;syntax-args.html&amp;qu">
<meta property="og:type" content="website">
<meta property="og:title" content="Chris Hansen's Nut Shack">
<meta property="og:url" content="http://rafa1231518.github.io/nt/call.html">
<meta property="og:site_name" content="Chris Hansen's Nut Shack">
<meta property="og:description" content="CALL  
 Call one batch program from another, or call a subroutine.
Syntax
      CALL [drive:][path]filename [parameters]
  CALL :&amp;lt;i&amp;gt;label&amp;lt;/i&amp;gt; [&amp;lt;i&amp;gt;&amp;lt;a href=&amp;quot;syntax-args.html&amp;qu">
<meta property="og:image" content="http://rafa1231518.github.io/../images/top.png">
<meta property="og:updated_time" content="2016-11-02T00:02:48.842Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chris Hansen's Nut Shack">
<meta name="twitter:description" content="CALL  
 Call one batch program from another, or call a subroutine.
Syntax
      CALL [drive:][path]filename [parameters]
  CALL :&amp;lt;i&amp;gt;label&amp;lt;/i&amp;gt; [&amp;lt;i&amp;gt;&amp;lt;a href=&amp;quot;syntax-args.html&amp;qu">
<meta name="twitter:image" content="http://rafa1231518.github.io/../images/top.png">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link href="https://fonts.googleapis.com/css?family=Roboto|Source+Code+Pro" rel="stylesheet">
  
    <link rel="stylesheet" href="/css/style.css">
    <style type="text/css">
.header-anchor {
  display: none;
}
    </style>
  
  

  
  <!-- baidu webmaster push -->
  <!-- tracking
  <script src='//push.zhanzhang.baidu.com/push.js'></script>
  -->

</head>
<body class="home blog custom-background custom-font-enabled single-author">
  
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Chris Hansen&#39;s Nut Shack" rel="home">Chris Hansen&#39;s Nut Shack</a>
      </h1>
      
        <h2 class="site-description">
          <a href="/" id="subtitle">Have a seat, right over there.</a>
        </h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/pagelist">Tools &amp; Stuff</a></li>
                
                </ul>
            </div>
    </nav>
</header>
      <div id="main" class="wrapper">
        
          <div id="primary" class="site-content"><div id="content" role="main"><article id="page-undefined" class="page-undefined post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <!-- #BeginLibraryItem "/Library/head_nt.lbi" --><!-- #EndLibraryItem --><h1>CALL</h1>  
<p> Call one batch program from another, or call a subroutine.</p>
<pre>Syntax
      CALL [<i>drive</i>:][<i>path</i>]<i>filename</i> [<i><a href="syntax-args.html">parameters</a></i>]
<pre><code>  CALL :&lt;i&gt;label&lt;/i&gt; [&lt;i&gt;&lt;a href=&quot;syntax-args.html&quot;&gt;parameters&lt;/a&gt;&lt;/i&gt;]

  CALL &lt;i&gt;internal_cmd&lt;/i&gt;
</code></pre>
<p>Key:<br>
pathname     The batch program to run.</p>
<p>parameters   Any command-line arguments.</p>
<p>:<i>label</i>       Jump to a label in the current batch script.</p>
<p><i>internal_cmd</i> Run an <a href="syntax-internal.html">internal</a> command, first expanding any variables in the argument.</p></pre><br>
<h2> CALL a second batch file</h2><p></p>
<blockquote>
<p>The CALL command will launch a new batch file context along with any specified parameters. When the end of the second batch file is reached (or if EXIT is used), control will return to just after the initial CALL statement.</p>
<p>Arguments can be passed either as a simple string or using a variable: </p>
<p><span class="code">CALL MyScript.cmd "1234"<br>
CALL OtherScript.cmd %_MyVariable%</span></p>
<p>Example</p>
<p class="code">::----------start main.cmd-----------<br>
 @Echo off <br>
 CALL function.cmd 10 first <br>
Echo    %_description% - %_number% <br>
<br>
CALL function.cmd 15 second <br>
Echo  %_description% - %_number% <br>
 ::----------end main.cmd-------------<br>
 <br>
::----------start function.cmd---------<br>
 @Echo off<br>
 :: Add 25 to %1<br>
 SET /a _number=%1 + 25<br>
 :: Store %2 <br>
  SET _description=[%2]<br>
::----------end function.cmd-----------</p>
<p>In many cases you will also want to use <a href="setlocal.html">SETLOCAL</a> and <a href="endlocal.html">ENDLOCAL</a> to keep variables in different batch files completely separate, this will avoid any potential problems if two scripts use the same variable name.
</p>
<p>If you execute a second batch file <i>without</i> using CALL you may run into some buggy behaviour: if both batch files contain a label with the same name and you have previously used CALL to jump to that label in the first script, you will find execution of the second script starts at the same label. 
Even if the second label does not exist this will still raise an error <i>"cannot find the batch label"</i>. This bug can be avoided by always using CALL.</p>
</blockquote>
<h2>CALL a subroutine (:label)</h2>
<blockquote>
<p>The CALL command will  pass control to the statement after the label specified  along with any specified parameters.<br>
 To exit the  subroutine specify <span class="code">GOTO:eof </span>this will transfer control to the end of  the current subroutine. </p>
<p> A label is defined by a single colon followed by a name. This is the basis of a batch file <a href="syntax-functions.html">function</a>. </p>
<p class="code">CALL :sub_display 123<br>
CALL :sub_display 456<br>
ECHO All Done<br>
GOTO :eof</p>
<p><span class="code">  :sub_display<br>
  ECHO The result is %1<br>
  EXIT /B<br>
  <br>
</span>At the end of the subroutine an <span class="code"><a href="exit.html">EXIT /B</a></span> will return  to the position where you used CALL <br>
(<span class="code">GOTO :eof </span>can also be used for this)</p>
</blockquote>
<h2>Passing by Reference </h2>
<blockquote>
<p>In addition to passing numeric or string values on the command line, it is also possible to pass a <a href="syntax-variables.html">variable</a> name and then use the variable to transfer data between scripts or subroutines. Passing by reference is a slightly more advanced technique but can be particularly useful when the string contains characters that are CMD <a href="syntax-esc.html#delimiters">delimiters</a> or quotes.<br>
</p>
</blockquote>
<pre>    @Echo off
    Echo:
    Set "var1=Red Pippin"
    Set "var2=St Edmunds Pippin"
    Set "var3=Egremont Russet"
<pre><code>Echo: before: var1=%var1%  var2=%var2% var3=%var3%
call &lt;b&gt;:myGetFunc&lt;/b&gt; var1 var2 var3
Echo: after: var1=%var1%  var2=%var2% var3=%var3%

Echo:&amp;amp;pause&amp;amp;goto:eof

::----------------------------------------------
::-- Function section starts below
::----------------------------------------------

&lt;b&gt;:myGetFunc&lt;/b&gt;    - passing a variable by reference
Set &quot;%~1=return64&quot;
Set &quot;%~3=return65&quot;
EXIT /B&lt;/pre&gt;
</code></pre>
<p></p><h2>Buggy behaviour when using CALL</h2><p></p>
<blockquote>
<p> Redirection with <span class="code"><a href="syntax-redirection.html">&amp; | &lt;&gt; </a></span> does not work as expected. <br>
If the CALL command contains a caret character within a quoted string "test^ing" , the carets will be <a href="http://stackoverflow.com/a/4095133/1720814" target="_blank" rel="external">doubled</a>. </p>
</blockquote>
<h2><a id="advanced"></a>Advanced usage : CALLing internal commands</h2>
<pre>    CALL <i>command</i> [<i>command_parameters</i>]</pre>
<blockquote>
<p>CALL can also be used to run any <a href="syntax-internal.html">internal</a> command (SET, ECHO etc) with the exception of FOR and IF.<br>
CALL will  expand any  variables passed on the same line. CALL  <a href="rem.html">REM</a> only partly works:  <a href="syntax-redirection.html">redirection</a> operators, conditional execution operators and <a href="syntax-brackets.html">brackets</a> will be not remarked. </p>
<p>This is undocumented behaviour, in fact whenever CALL is run without a<span class="code"> : </span>prefix, it will always search disk for a batch file/executable called <i>command</i> before running the internal command. The effect of this extra disc access is that CALL SET is significantly slower than CALL, its use in loops or with a large number of variables should be avoided.<br><br>
Example</p>
<pre> @Echo off
 SETLOCAL
 set _server=frodo
 set _var=_server
 <b>CALL SET </b>_result=<b>%%</b>%_var%<b>%%</b>
 echo %_result%</pre>
<p>The line shown in bold has the '%' symbols tripled,  CALL will expand this to: <span class="code">SET _result=frodo</span></p>
<p>Each CALL does one substitution of the variables. (You can also do CALL CALL... for multiple substitutions)</p>
<p>In many cases, <a href="delayedexpansion.html">DelayedExpansion</a> is a better/faster method:</p>
<pre> @Echo Off
 Setlocal EnableDelayedExpansion
 Set _server=frodo
 Set _var=_server
 Set _result=!<b>%_var%</b>!
 Echo %_result%</pre></blockquote>
<h2>Errorlevels</h2>
<blockquote>
<p>If you run <span class="code">CALL SET</span> this will reset <a href="errorlevel.html">%ERRORLEVEL%</a> = 0 even though normally SET ... will fail to reset an ERRORLEVEL<br>
If you CALL a subroutine, the ERRORLEVEL will be left <i>unchanged </i><br>
If you CALL a subroutine, with a label that does not exist %ERRORLEVEL% will be set to 1</p>
</blockquote>
<p>If you CALL an executable or resource kit utility make sure it's available on the machine where the batch will be running, test for it's existence with an <a href="if.html">IF</a> command and throw an error if missing.</p>
<p>CALL is an <a href="syntax-internal.html">internal</a> command, (internally it is closely related to GOTO).<br>
If <a href="cmd.html">Command Extensions</a> are disabled, the CALL command will not accept batch labels. <br>
<br>
<i class="quote">“My mother never saw the irony in calling me a son-of-a-bitch” ~ Jack Nicholson </i> <br>
<b><br>
Related:</b></p>
<p><a href="syntax-functions.html">Syntax: Functions</a> - How to package blocks of code.<br>
<a href="cmd.html">CMD</a> - can be used to call a subsequent batch and ALWAYS return even if errors occur.<br>
<a href="goto.html">GOTO</a> - jump to a label or GOTO :eof <br>
<a href="start.html">START</a> - Start a separate window to run a specified program or command.<br>
Equivalent bash command (Linux): <a href="../bash/source.html">. (source)</a> - Run a command script in the current shell, <a href="../bash/builtin.html">builtin</a> - Run a shell builtin.</p><!-- #BeginLibraryItem "/Library/foot_nt.lbi" --><p><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- windows300 -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-6140977852749469" data-ad-slot="7649547908"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
<hr>
<div id="bl" class="footer"><a href="#"><img src="../images/top.png" width="30" height="22" alt="Back to the Top"></a></div>
<div id="br" class="footer, tagline">© Copyright <a href="http://ss64.com/" target="_blank" rel="external">SS64.com</a> 1999-2016<br>
Some rights reserved</div><!-- #EndLibraryItem -->
</pre>
      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    Posted at <a href="/nt/call.html">
    <time datetime="2016-09-04T22:26:55.000Z" class="entry-date">
        2016-09-04
    </time>
</a> (click date for permalink).
    
    
    </footer>
</article>


    






</div></div>
          <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="Search" />
    </div>
</form></aside>
  
    
  
    
  
    
  
    
  
    
  
</div>
        
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2016 chrishansen69 (rafa1231518).
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/wizardforcel/hexo-theme-cyanstyle">Wizard Zhang (wizardforcel)</a></p>
</footer>
    <!-- tracking
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
-->

<script src="/js/jquery-2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
  
</body>
</html>