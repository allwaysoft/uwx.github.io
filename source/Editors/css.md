---
title: CSS Minifier and Beautifier
date: 2016-08-15 13:49:34
---

<script src="/libraries/lib/codemirror.js"></script>

<link rel="stylesheet" href="/libraries/lib/codemirror.css">

<script src="/libraries/mode/css/css.js"></script>

<script type="text/javascript">
window.onload = function() {
  // precalculated shift array
  var shift = ["\n","\n    ","\n        ","\n            ","\n                ","\n                    ","\n                        ","\n                            ","\n                                ","\n                                    ","\n                                        ","\n                                            ","\n                                                ","\n                                                    ","\n                                                        ","\n                                                            ","\n                                                                ","\n                                                                    ","\n                                                                        ","\n                                                                            ","\n                                                                                ","\n                                                                                    ","\n                                                                                        ","\n                                                                                            ","\n                                                                                                ","\n                                                                                                    ","\n                                                                                                        ","\n                                                                                                            ","\n                                                                                                                ","\n                                                                                                                    ","\n                                                                                                                        ","\n                                                                                                                            ","\n                                                                                                                                ","\n                                                                                                                                    ","\n                                                                                                                                        ","\n                                                                                                                                            ","\n                                                                                                                                                ","\n                                                                                                                                                    ","\n                                                                                                                                                        ","\n                                                                                                                                                            ","\n                                                                                                                                                                ","\n                                                                                                                                                                    ","\n                                                                                                                                                                        ","\n                                                                                                                                                                            ","\n                                                                                                                                                                                ","\n                                                                                                                                                                                    ","\n                                                                                                                                                                                        ","\n                                                                                                                                                                                            ","\n                                                                                                                                                                                                ","\n                                                                                                                                                                                                    ","\n                                                                                                                                                                                                        ","\n                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                                                                                                                ","\n                                                                                                                                                                                                                                                                                                                                                                                                    ","\n                                                                                                                                                                                                                                                                                                                                                                                                        ","\n                                                                                                                                                                                                                                                                                                                                                                                                            ","\n                                                                                                                                                                                                                                                                                                                                                                                                                "];

  function minify(str) {
    return str
      .replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"") // comments
      .replace(/\s{1,}/g,' ')
      .replace(/\{\s{1,}/g,"{")
      .replace(/\}\s{1,}/g,"}")
      .replace(/\;\s{1,}/g,";")
      .replace(/\/\*\s{1,}/g,"/*")
      .replace(/\*\/\s{1,}/g,"*/");
  }
  function beautify(text) {
    var ar = text.replace(/\s{1,}/g,' ')
            .replace(/\{/g,"{~::~")
            .replace(/\}/g,"~::~}~::~")
            .replace(/\;/g,";~::~")
            .replace(/\/\*/g,"~::~/*")
            .replace(/\*\//g,"*/~::~")
            .replace(/~::~\s{0,}~::~/g,"~::~")
            .split('~::~'),
        len = ar.length,
        deep = 0,
        str = '',
        ix = 0;//,
        //shift = step ? createShiftArr(step) : this.shift;

    for(ix=0;ix<len;ix++) {

        if( /\{/.exec(ar[ix]))  {
            str += shift[deep++]+ar[ix];
        } else
        if( /\}/.exec(ar[ix]))  {
            str += shift[--deep]+ar[ix];
        } else
        if( /\*\\/.exec(ar[ix]))  {
            str += shift[deep]+ar[ix];
        }
        else {
            str += shift[deep]+ar[ix];
        }
    }
    return str.replace(/^\n{1,}/,'');
  }
  var myCodeMirror = CodeMirror(document.getElementById('textfield'), {
    value: "/* CSS example from http://www.w3schools.com/css/tryit.asp?filename=trycss_border-width */\n/*\nvkBeautify used under the MIT license:\n\nThe MIT License (MIT)\n\nCopyright (c) 2013 Vadim Kiryukhin\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n*/\np.one {\n    border-style: solid;\n    border-width: 5px;\n}\n\np.two {\n    border-style: solid;\n    border-width: medium;\n}\n\np.three {\n    border-style: dotted;\n    border-width: 2px;\n}\n\np.four {\n    border-style: dotted;\n    border-width: thick;\n}\n\np.five {\n    border-style: double;\n    border-width: 15px;\n}\n\np.six {\n    border-style: double;\n    border-width: thick;\n}\n\np.seven {\n    border-style: solid;\n    border-width: 2px 10px 4px 20px;\n}",
    mode:  "css",
    lineWrapping: true,
    lineNumbers: true
  });
  // Minify
  document.getElementById('do-min').onclick = function() {
    try {
      myCodeMirror.setValue(minify(myCodeMirror.getValue()));
    } catch (err) {
      alert("Could not minify: " + err);
      console.trace(err);
    }
  };
  // Beautify
  document.getElementById('do-bt').onclick = function() {
    try {
      myCodeMirror.setValue(beautify(myCodeMirror.getValue()));
    } catch (err) {
      alert("Could not beautify: " + err);
      console.trace(err);
    }
  };
};
</script>

<style type="text/css">
.CodeMirror { /* not at all stolen from http://jsbeautifier.org/ */
    border: 1px solid #ccc;
    height: 450px;
    font-size: 90%;
    margin-bottom: 6px;
    background: white;
}
</style>

<button class="submit" id="do-min">Minify</button> <button class="submit" id="do-bt">Beautify</button>

<div id="textfield"></div>