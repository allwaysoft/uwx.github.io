(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"),require("../../addon/mode/multiplex"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror","../../addon/mode/multiplex"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("twig:inner",function(){var e=["and","as","autoescape","endautoescape","block","do","endblock","else","elseif","extends","for","endfor","embed","endembed","filter","endfilter","flush","from","if","endif","in","is","include","import","not","or","set","spaceless","endspaceless","with","endwith","trans","endtrans","blocktrans","endblocktrans","macro","endmacro","use","verbatim","endverbatim"],t=/^[+\-*&%=<>!?|~^]/,n=/^[:\[\(\{]/,i=["true","false","null","empty","defined","divisibleby","divisible by","even","odd","iterable","sameas","same as"],r=/^(\d[+\-\*\/])?\d+(\.\d+)?/;e=new RegExp("(("+e.join(")|(")+"))\\b");i=new RegExp("(("+i.join(")|(")+"))\\b");function o(o,a){var s=o.peek();if(a.incomment){if(!o.skipTo("#}")){o.skipToEnd()}else{o.eatWhile(/\#|}/);a.incomment=false}return"comment"}else if(a.intag){if(a.operator){a.operator=false;if(o.match(i)){return"atom"}if(o.match(r)){return"number"}}if(a.sign){a.sign=false;if(o.match(i)){return"atom"}if(o.match(r)){return"number"}}if(a.instring){if(s==a.instring){a.instring=false}o.next();return"string"}else if(s=="'"||s=='"'){a.instring=s;o.next();return"string"}else if(o.match(a.intag+"}")||o.eat("-")&&o.match(a.intag+"}")){a.intag=false;return"tag"}else if(o.match(t)){a.operator=true;return"operator"}else if(o.match(n)){a.sign=true}else{if(o.eat(" ")||o.sol()){if(o.match(e)){return"keyword"}if(o.match(i)){return"atom"}if(o.match(r)){return"number"}if(o.sol()){o.next()}}else{o.next()}}return"variable"}else if(o.eat("{")){if(s=o.eat("#")){a.incomment=true;if(!o.skipTo("#}")){o.skipToEnd()}else{o.eatWhile(/\#|}/);a.incomment=false}return"comment"}else if(s=o.eat(/\{|%/)){a.intag=s;if(s=="{"){a.intag="}"}o.eat("-");return"tag"}}o.next()}return{startState:function(){return{}},token:function(e,t){return o(e,t)}}});e.defineMode("twig",function(t,n){var i=e.getMode(t,"twig:inner");if(!n||!n.base)return i;return e.multiplexingMode(e.getMode(t,n.base),{open:/\{[{#%]/,close:/[}#%]\}/,mode:i,parseDelimiters:true})});e.defineMIME("text/x-twig","twig")});