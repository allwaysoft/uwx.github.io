(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"),require("../javascript/javascript"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror","../javascript/javascript"],e);else e(CodeMirror)})(function(e){"use strict";e.defineMode("pegjs",function(t){var r=e.getMode(t,"javascript");function n(e){return e.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)}return{startState:function(){return{inString:false,stringType:null,inComment:false,inCharacterClass:false,braced:0,lhs:true,localState:null}},token:function(t,i){if(t)if(!i.inString&&!i.inComment&&(t.peek()=='"'||t.peek()=="'")){i.stringType=t.peek();t.next();i.inString=true}if(!i.inString&&!i.inComment&&t.match(/^\/\*/)){i.inComment=true}if(i.inString){while(i.inString&&!t.eol()){if(t.peek()===i.stringType){t.next();i.inString=false}else if(t.peek()==="\\"){t.next();t.next()}else{t.match(/^.[^\\\"\']*/)}}return i.lhs?"property string":"string"}else if(i.inComment){while(i.inComment&&!t.eol()){if(t.match(/\*\//)){i.inComment=false}else{t.match(/^.[^\*]*/)}}return"comment"}else if(i.inCharacterClass){while(i.inCharacterClass&&!t.eol()){if(!(t.match(/^[^\]\\]+/)||t.match(/^\\./))){i.inCharacterClass=false}}}else if(t.peek()==="["){t.next();i.inCharacterClass=true;return"bracket"}else if(t.match(/^\/\//)){t.skipToEnd();return"comment"}else if(i.braced||t.peek()==="{"){if(i.localState===null){i.localState=e.startState(r)}var a=r.token(t,i.localState);var l=t.current();if(!a){for(var s=0;s<l.length;s++){if(l[s]==="{"){i.braced++}else if(l[s]==="}"){i.braced--}}}return a}else if(n(t)){if(t.peek()===":"){return"variable"}return"variable-2"}else if(["[","]","(",")"].indexOf(t.peek())!=-1){t.next();return"bracket"}else if(!t.eatSpace()){t.next()}return null}}},"javascript")});