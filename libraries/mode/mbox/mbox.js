(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";var r=["From","Sender","Reply-To","To","Cc","Bcc","Message-ID","In-Reply-To","References","Resent-From","Resent-Sender","Resent-To","Resent-Cc","Resent-Bcc","Resent-Message-ID","Return-Path","Received"];var t=["Date","Subject","Comments","Keywords","Resent-Date"];e.registerHelper("hintWords","mbox",r.concat(t));var n=/^[ \t]/;var a=/^From /;var i=new RegExp("^("+r.join("|")+"): ");var o=new RegExp("^("+t.join("|")+"): ");var s=/^[^:]+:/;var d=/^[^ ]+@[^ ]+/;var u=/^.*?(?=[^ ]+?@[^ ]+)/;var f=/^<.*?>/;var l=/^.*?(?=<.*>)/;function c(e){if(e==="Subject")return"header";return"string"}function m(e,r){if(e.sol()){r.inSeparator=false;if(r.inHeader&&e.match(n)){return null}else{r.inHeader=false;r.header=null}if(e.match(a)){r.inHeaders=true;r.inSeparator=true;return"atom"}var t;var m=false;if((t=e.match(o))||(m=true)&&(t=e.match(i))){r.inHeaders=true;r.inHeader=true;r.emailPermitted=m;r.header=t[1];return"atom"}if(r.inHeaders&&(t=e.match(s))){r.inHeader=true;r.emailPermitted=true;r.header=t[1];return"atom"}r.inHeaders=false;e.skipToEnd();return null}if(r.inSeparator){if(e.match(d))return"link";if(e.match(u))return"atom";e.skipToEnd();return"atom"}if(r.inHeader){var p=c(r.header);if(r.emailPermitted){if(e.match(f))return p+" link";if(e.match(l))return p}e.skipToEnd();return p}e.skipToEnd();return null}e.defineMode("mbox",function(){return{startState:function(){return{inSeparator:false,inHeader:false,emailPermitted:false,header:null,inHeaders:false}},token:m,blankLine:function(e){e.inHeaders=e.inSeparator=e.inHeader=false}}});e.defineMIME("application/mbox","mbox")});