(function(e){if(typeof exports=="object"&&typeof module=="object")e(require("../../lib/codemirror"));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],e);else e(CodeMirror)})(function(e){"use strict";function r(e,r,t){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(r.lastType)||r.lastType=="quasi"&&/\{\s*$/.test(e.string.slice(0,e.pos-(t||0)))}e.defineMode("javascript",function(t,n){var i=t.indentUnit;var a=n.statementIndent;var u=n.jsonld;var f=n.json||u;var o=n.typescript;var l=n.wordCharacters||/[\w$\xa1-\uffff]/;var s=function(){function e(e){return{type:e,style:"keyword"}}var r=e("keyword a"),t=e("keyword b"),n=e("keyword c");var i=e("operator"),a={type:"atom",style:"atom"};var u={"if":e("if"),"while":r,"with":r,"else":t,"do":t,"try":t,"finally":t,"return":n,"break":n,"continue":n,"new":e("new"),"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),"let":e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a,"this":e("this"),"class":e("class"),"super":e("atom"),"yield":n,"export":e("export"),"import":e("import"),"extends":n,await:n,async:e("async")};if(o){var f={type:"variable",style:"variable-3"};var l={"interface":e("class"),"implements":n,namespace:n,module:e("module"),"enum":e("module"),"public":e("modifier"),"private":e("modifier"),"protected":e("modifier"),"abstract":e("modifier"),as:i,string:f,number:f,"boolean":f,any:f};for(var s in l){u[s]=l[s]}}return u}();var c=/[+\-*&%=<>!?|~^]/;var d=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(e){var r=false,t,n=false;while((t=e.next())!=null){if(!r){if(t=="/"&&!n)return;if(t=="[")n=true;else if(n&&t=="]")n=false}r=!r&&t=="\\"}}var m,v;function y(e,r,t){m=e;v=t;return r}function k(e,t){var n=e.next();if(n=='"'||n=="'"){t.tokenize=b(n);return t.tokenize(e,t)}else if(n=="."&&e.match(/^\d+(?:[eE][+\-]?\d+)?/)){return y("number","number")}else if(n=="."&&e.match("..")){return y("spread","meta")}else if(/[\[\]{}\(\),;\:\.]/.test(n)){return y(n)}else if(n=="="&&e.eat(">")){return y("=>","operator")}else if(n=="0"&&e.eat(/x/i)){e.eatWhile(/[\da-f]/i);return y("number","number")}else if(n=="0"&&e.eat(/o/i)){e.eatWhile(/[0-7]/i);return y("number","number")}else if(n=="0"&&e.eat(/b/i)){e.eatWhile(/[01]/i);return y("number","number")}else if(/\d/.test(n)){e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return y("number","number")}else if(n=="/"){if(e.eat("*")){t.tokenize=h;return h(e,t)}else if(e.eat("/")){e.skipToEnd();return y("comment","comment")}else if(r(e,t,1)){p(e);e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return y("regexp","string-2")}else{e.eatWhile(c);return y("operator","operator",e.current())}}else if(n=="`"){t.tokenize=w;return w(e,t)}else if(n=="#"){e.skipToEnd();return y("error","error")}else if(c.test(n)){e.eatWhile(c);return y("operator","operator",e.current())}else if(l.test(n)){e.eatWhile(l);var i=e.current(),a=s.propertyIsEnumerable(i)&&s[i];return a&&t.lastType!="."?y(a.type,a.style,i):y("variable","variable",i)}}function b(e){return function(r,t){var n=false,i;if(u&&r.peek()=="@"&&r.match(d)){t.tokenize=k;return y("jsonld-keyword","meta")}while((i=r.next())!=null){if(i==e&&!n)break;n=!n&&i=="\\"}if(!n)t.tokenize=k;return y("string","string")}}function h(e,r){var t=false,n;while(n=e.next()){if(n=="/"&&t){r.tokenize=k;break}t=n=="*"}return y("comment","comment")}function w(e,r){var t=false,n;while((n=e.next())!=null){if(!t&&(n=="`"||n=="$"&&e.eat("{"))){r.tokenize=k;break}t=!t&&n=="\\"}return y("quasi","string-2",e.current())}var x="([{}])";function g(e,r){if(r.fatArrowAt)r.fatArrowAt=null;var t=e.string.indexOf("=>",e.start);if(t<0)return;var n=0,i=false;for(var a=t-1;a>=0;--a){var u=e.string.charAt(a);var f=x.indexOf(u);if(f>=0&&f<3){if(!n){++a;break}if(--n==0){if(u=="(")i=true;break}}else if(f>=3&&f<6){++n}else if(l.test(u)){i=true}else if(/["'\/]/.test(u)){return}else if(i&&!n){++a;break}}if(i&&!n)r.fatArrowAt=a}var j={atom:true,number:true,variable:true,string:true,regexp:true,"this":true,"jsonld-keyword":true};function M(e,r,t,n,i,a){this.indented=e;this.column=r;this.type=t;this.prev=i;this.info=a;if(n!=null)this.align=n}function V(e,r){for(var t=e.localVars;t;t=t.next)if(t.name==r)return true;for(var n=e.context;n;n=n.prev){for(var t=n.vars;t;t=t.next)if(t.name==r)return true}}function E(e,r,t,n,i){var a=e.cc;I.state=e;I.stream=i;I.marked=null,I.cc=a;I.style=r;if(!e.lexical.hasOwnProperty("align"))e.lexical.align=true;while(true){var u=a.length?a.pop():f?N:S;if(u(t,n)){while(a.length&&a[a.length-1].lex)a.pop()();if(I.marked)return I.marked;if(t=="variable"&&V(e,n))return"variable-2";return r}}}var I={state:null,column:null,marked:null,cc:null};function z(){for(var e=arguments.length-1;e>=0;e--)I.cc.push(arguments[e])}function A(){z.apply(null,arguments);return true}function T(e){function r(r){for(var t=r;t;t=t.next)if(t.name==e)return true;return false}var t=I.state;I.marked="def";if(t.context){if(r(t.localVars))return;t.localVars={name:e,next:t.localVars}}else{if(r(t.globalVars))return;if(n.globalVars)t.globalVars={name:e,next:t.globalVars}}}var $={name:"this",next:{name:"arguments"}};function q(){I.state.context={prev:I.state.context,vars:I.state.localVars};I.state.localVars=$}function C(){I.state.localVars=I.state.context.vars;I.state.context=I.state.context.prev}function W(e,r){var t=function(){var t=I.state,n=t.indented;if(t.lexical.type=="stat")n=t.lexical.indented;else for(var i=t.lexical;i&&i.type==")"&&i.align;i=i.prev)n=i.indented;t.lexical=new M(n,I.stream.column(),e,null,t.lexical,r)};t.lex=true;return t}function O(){var e=I.state;if(e.lexical.prev){if(e.lexical.type==")")e.indented=e.lexical.indented;e.lexical=e.lexical.prev}}O.lex=true;function P(e){function r(t){if(t==e)return A();else if(e==";")return z();else return A(r)}return r}function S(e,r){if(e=="var")return A(W("vardef",r.length),pe,P(";"),O);if(e=="keyword a")return A(W("form"),N,S,O);if(e=="keyword b")return A(W("form"),S,O);if(e=="{")return A(W("}"),ae,O);if(e==";")return A();if(e=="if"){if(I.state.lexical.info=="else"&&I.state.cc[I.state.cc.length-1]==O)I.state.cc.pop()();return A(W("form"),N,S,O,be)}if(e=="function")return A(Me);if(e=="for")return A(W("form"),he,S,O);if(e=="variable")return A(W("stat"),Z);if(e=="switch")return A(W("form"),N,W("}","switch"),P("{"),ae,O,O);if(e=="case")return A(N,P(":"));if(e=="default")return A(P(":"));if(e=="catch")return A(W("form"),q,P("("),Ve,P(")"),S,O,C);if(e=="class")return A(W("form"),Ee,O);if(e=="export")return A(W("stat"),Te,O);if(e=="import")return A(W("stat"),$e,O);if(e=="module")return A(W("form"),me,W("}"),P("{"),ae,O,O);if(e=="async")return A(S);return z(W("stat"),N,P(";"),O)}function N(e){return H(e,false)}function B(e){return H(e,true)}function H(e,r){if(I.state.fatArrowAt==I.stream.start){var t=r?Q:L;if(e=="(")return A(q,W(")"),ne(me,")"),O,P("=>"),t,C);else if(e=="variable")return z(q,me,P("=>"),t,C)}var n=r?G:F;if(j.hasOwnProperty(e))return A(n);if(e=="function")return A(Me,n);if(e=="keyword c"||e=="async")return A(r?D:U);if(e=="(")return A(W(")"),U,P(")"),O,n);if(e=="operator"||e=="spread")return A(r?B:N);if(e=="[")return A(W("]"),Oe,O,n);if(e=="{")return ie(ee,"}",null,n);if(e=="quasi")return z(J,n);if(e=="new")return A(R(r));return A()}function U(e){if(e.match(/[;\}\)\],]/))return z();return z(N)}function D(e){if(e.match(/[;\}\)\],]/))return z();return z(B)}function F(e,r){if(e==",")return A(N);return G(e,r,false)}function G(e,r,t){var n=t==false?F:G;var i=t==false?N:B;if(e=="=>")return A(q,t?Q:L,C);if(e=="operator"){if(/\+\+|--/.test(r))return A(n);if(r=="?")return A(N,P(":"),i);return A(i)}if(e=="quasi"){return z(J,n)}if(e==";")return;if(e=="(")return ie(B,")","call",n);if(e==".")return A(_,n);if(e=="[")return A(W("]"),U,P("]"),O,n)}function J(e,r){if(e!="quasi")return z();if(r.slice(r.length-2)!="${")return A(J);return A(N,K)}function K(e){if(e=="}"){I.marked="string-2";I.state.tokenize=w;return A(J)}}function L(e){g(I.stream,I.state);return z(e=="{"?S:N)}function Q(e){g(I.stream,I.state);return z(e=="{"?S:B)}function R(e){return function(r){if(r==".")return A(e?Y:X);else return z(e?B:N)}}function X(e,r){if(r=="target"){I.marked="keyword";return A(F)}}function Y(e,r){if(r=="target"){I.marked="keyword";return A(G)}}function Z(e){if(e==":")return A(O,S);return z(F,P(";"),O)}function _(e){if(e=="variable"){I.marked="property";return A()}}function ee(e,r){if(e=="async"){I.marked="property";return A(ee)}else if(e=="variable"||I.style=="keyword"){I.marked="property";if(r=="get"||r=="set")return A(re);return A(te)}else if(e=="number"||e=="string"){I.marked=u?"property":I.style+" property";return A(te)}else if(e=="jsonld-keyword"){return A(te)}else if(e=="modifier"){return A(ee)}else if(e=="["){return A(N,P("]"),te)}else if(e=="spread"){return A(N)}else if(e==":"){return z(te)}}function re(e){if(e!="variable")return z(te);I.marked="property";return A(Me)}function te(e){if(e==":")return A(B);if(e=="(")return z(Me)}function ne(e,r){function t(n,i){if(n==","){var a=I.state.lexical;if(a.info=="call")a.pos=(a.pos||0)+1;return A(function(t,n){if(t==r||n==r)return z();return z(e)},t)}if(n==r||i==r)return A();return A(P(r))}return function(n,i){if(n==r||i==r)return A();return z(e,t)}}function ie(e,r,t){for(var n=3;n<arguments.length;n++)I.cc.push(arguments[n]);return A(W(r,t),ne(e,r),O)}function ae(e){if(e=="}")return A();return z(S,ae)}function ue(e){if(o&&e==":")return A(oe)}function fe(e,r){if(r=="=")return A(B)}function oe(e){if(e=="variable"){I.marked="variable-3";return A(de)}if(e=="{")return A(ne(se,"}"));if(e=="(")return A(ne(ce,")"),le)}function le(e){if(e=="=>")return A(oe)}function se(e){if(e=="variable"||I.style=="keyword"){I.marked="property";return A(se)}else if(e==":"){return A(oe)}}function ce(e){if(e=="variable")return A(ce);else if(e==":")return A(oe)}function de(e,r){if(r=="<")return A(ne(oe,">"),de);if(e=="[")return A(P("]"),de)}function pe(){return z(me,ue,ye,ke)}function me(e,r){if(e=="modifier")return A(me);if(e=="variable"){T(r);return A()}if(e=="spread")return A(me);if(e=="[")return ie(me,"]");if(e=="{")return ie(ve,"}")}function ve(e,r){if(e=="variable"&&!I.stream.match(/^\s*:/,false)){T(r);return A(ye)}if(e=="variable")I.marked="property";if(e=="spread")return A(me);if(e=="}")return z();return A(P(":"),me,ye)}function ye(e,r){if(r=="=")return A(B)}function ke(e){if(e==",")return A(pe)}function be(e,r){if(e=="keyword b"&&r=="else")return A(W("form","else"),S,O)}function he(e){if(e=="(")return A(W(")"),we,P(")"),O)}function we(e){if(e=="var")return A(pe,P(";"),ge);if(e==";")return A(ge);if(e=="variable")return A(xe);return z(N,P(";"),ge)}function xe(e,r){if(r=="in"||r=="of"){I.marked="keyword";return A(N)}return A(F,ge)}function ge(e,r){if(e==";")return A(je);if(r=="in"||r=="of"){I.marked="keyword";return A(N)}return z(N,P(";"),je)}function je(e){if(e!=")")A(N)}function Me(e,r){if(r=="*"){I.marked="keyword";return A(Me)}if(e=="variable"){T(r);return A(Me)}if(e=="(")return A(q,W(")"),ne(Ve,")"),O,ue,S,C)}function Ve(e){if(e=="spread")return A(Ve);return z(me,ue,fe)}function Ee(e,r){if(e=="variable"){T(r);return A(Ie)}}function Ie(e,r){if(r=="extends")return A(o?oe:N,Ie);if(e=="{")return A(W("}"),ze,O)}function ze(e,r){if(e=="variable"||I.style=="keyword"){if(r=="static"){I.marked="keyword";return A(ze)}I.marked="property";if(r=="get"||r=="set")return A(Ae,Me,ze);return A(Me,ze)}if(r=="*"){I.marked="keyword";return A(ze)}if(e==";")return A(ze);if(e=="}")return A()}function Ae(e){if(e!="variable")return z();I.marked="property";return A()}function Te(e,r){if(r=="*"){I.marked="keyword";return A(We,P(";"))}if(r=="default"){I.marked="keyword";return A(N,P(";"))}return z(S)}function $e(e){if(e=="string")return A();return z(qe,We)}function qe(e,r){if(e=="{")return ie(qe,"}");if(e=="variable")T(r);if(r=="*")I.marked="keyword";return A(Ce)}function Ce(e,r){if(r=="as"){I.marked="keyword";return A(qe)}}function We(e,r){if(r=="from"){I.marked="keyword";return A(N)}}function Oe(e){if(e=="]")return A();return z(ne(B,"]"))}function Pe(e,r){return e.lastType=="operator"||e.lastType==","||c.test(r.charAt(0))||/[,.]/.test(r.charAt(0))}return{startState:function(e){var r={tokenize:k,lastType:"sof",cc:[],lexical:new M((e||0)-i,0,"block",false),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:e||0};if(n.globalVars&&typeof n.globalVars=="object")r.globalVars=n.globalVars;return r},token:function(e,r){if(e.sol()){if(!r.lexical.hasOwnProperty("align"))r.lexical.align=false;r.indented=e.indentation();g(e,r)}if(r.tokenize!=h&&e.eatSpace())return null;var t=r.tokenize(e,r);if(m=="comment")return t;r.lastType=m=="operator"&&(v=="++"||v=="--")?"incdec":m;return E(r,t,m,v,e)},indent:function(r,t){if(r.tokenize==h)return e.Pass;if(r.tokenize!=k)return 0;var u=t&&t.charAt(0),f=r.lexical;if(!/^\s*else\b/.test(t))for(var o=r.cc.length-1;o>=0;--o){var l=r.cc[o];if(l==O)f=f.prev;else if(l!=be)break}if(f.type=="stat"&&u=="}")f=f.prev;if(a&&f.type==")"&&f.prev.type=="stat")f=f.prev;var s=f.type,c=u==s;if(s=="vardef")return f.indented+(r.lastType=="operator"||r.lastType==","?f.info+1:0);else if(s=="form"&&u=="{")return f.indented;else if(s=="form")return f.indented+i;else if(s=="stat")return f.indented+(Pe(r,t)?a||i:0);else if(f.info=="switch"&&!c&&n.doubleIndentSwitch!=false)return f.indented+(/^(?:case|default)\b/.test(t)?i:2*i);else if(f.align)return f.column+(c?0:1);else return f.indented+(c?0:i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:f?null:"/*",blockCommentEnd:f?null:"*/",lineComment:f?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:f?"json":"javascript",jsonldMode:u,jsonMode:f,expressionAllowed:r,skipExpression:function(e){var r=e.cc[e.cc.length-1];if(r==N||r==B)e.cc.pop()}}});e.registerHelper("wordChars","javascript",/[\w$]/);e.defineMIME("text/javascript","javascript");e.defineMIME("text/ecmascript","javascript");e.defineMIME("application/javascript","javascript");e.defineMIME("application/x-javascript","javascript");e.defineMIME("application/ecmascript","javascript");e.defineMIME("application/json",{name:"javascript",json:true});e.defineMIME("application/x-json",{name:"javascript",json:true});e.defineMIME("application/ld+json",{name:"javascript",jsonld:true});e.defineMIME("text/typescript",{name:"javascript",typescript:true});e.defineMIME("application/typescript",{name:"javascript",typescript:true})});